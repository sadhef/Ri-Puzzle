(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{4848:function(e,t,a){Promise.resolve().then(a.t.bind(a,2489,23)),Promise.resolve().then(a.t.bind(a,3667,23)),Promise.resolve().then(a.bind(a,2020)),Promise.resolve().then(a.bind(a,8161))},2020:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return h}});var s=a(7437),l=a(2265),r=a(2167),n=a(5251),o=a(2898);let i=(0,o.Z)("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]);var c=a(9883);let d=(0,o.Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),m=(0,o.Z)("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);var p=a(612),u=a(2549),g=a(8161);function h(){let{isDark:e}=(0,g.useTheme)(),[t,a]=(0,l.useState)(null),[o,h]=(0,l.useState)(!1),[x,y]=(0,l.useState)(!1),[w,f]=(0,l.useState)(!1),[b,v]=(0,l.useState)(""),[j,N]=(0,l.useState)(!1);(0,l.useEffect)(()=>{let e=window.matchMedia("(display-mode: standalone)").matches||!0===window.navigator.standalone||document.referrer.includes("android-app://");f(e);let t=navigator.userAgent.toLowerCase(),s=/iphone|ipad|ipod/.test(t),l=/android/.test(t);/mobile|tablet/.test(t),y(s),s?v("ios"):l?v("android"):v("desktop");let r=e=>{console.log("PWA: beforeinstallprompt event fired"),e.preventDefault(),a(e),N(!0);let t=S();t&&setTimeout(()=>h(!0),2e3)},n=()=>{console.log("PWA: App was installed"),h(!1),a(null),N(!1),localStorage.setItem("pwa-installed","true"),"undefined"!=typeof gtag&&gtag("event","pwa_install",{event_category:"PWA",event_label:b})};return window.addEventListener("beforeinstallprompt",r),window.addEventListener("appinstalled",n),(()=>{if(s&&!e){let e=localStorage.getItem("ios-install-prompted"),t=localStorage.getItem("ios-install-last-prompted"),a=Date.now();(!e||t&&a-parseInt(t)>6048e5)&&setTimeout(()=>h(!0),3e3)}})(),()=>{window.removeEventListener("beforeinstallprompt",r),window.removeEventListener("appinstalled",n)}},[b]);let S=()=>{if(w||localStorage.getItem("pwa-installed"))return!1;let e=localStorage.getItem("pwa-prompt-dismissed"),t=localStorage.getItem("pwa-prompt-last-shown"),a=parseInt(localStorage.getItem("pwa-dismiss-count")||"0"),s=Date.now();return!(a>=3||e&&t&&s-parseInt(t)<2592e5)},k=async()=>{if(t)try{let e=await t.prompt();console.log("PWA: Install prompt result:",e);let{outcome:s}=await t.userChoice;console.log("PWA: User choice:",s),"accepted"===s?(console.log("PWA: User accepted the install prompt"),localStorage.setItem("pwa-installed","true")):(console.log("PWA: User dismissed the install prompt"),I()),a(null),h(!1)}catch(e){console.error("PWA: Error during installation:",e)}},I=()=>{h(!1);let e=parseInt(localStorage.getItem("pwa-dismiss-count")||"0");localStorage.setItem("pwa-prompt-dismissed","true"),localStorage.setItem("pwa-prompt-last-shown",Date.now().toString()),localStorage.setItem("pwa-dismiss-count",(e+1).toString()),x&&(localStorage.setItem("ios-install-prompted","true"),localStorage.setItem("ios-install-last-prompted",Date.now().toString()))};if(w||!j&&!x||!o)return null;let _=x?{title:"Add to Home Screen",steps:[{icon:i,text:"Tap the Share button in Safari"},{icon:c.Z,text:'Tap "Add to Home Screen"'},{icon:d,text:'Tap "Add" to install'}]}:"android"===b?{title:"Install App",steps:[{icon:d,text:"Tap Install when prompted"},{icon:m,text:"Or use browser menu > 'Add to Home screen'"}]}:{title:"Install Desktop App",steps:[{icon:d,text:"Click Install when prompted"},{icon:p.Z,text:"Or use browser menu > 'Install Ri-Puzzle'"}]};return(0,s.jsx)(r.M,{children:(0,s.jsx)(n.E.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},transition:{type:"spring",stiffness:300,damping:30},className:"fixed bottom-4 left-4 right-4 z-50 max-w-sm mx-auto",children:(0,s.jsxs)(n.E.div,{initial:{scale:.9},animate:{scale:1},className:"relative rounded-2xl p-5 shadow-2xl border backdrop-blur-lg ".concat(e?"bg-gray-900/95 border-gray-700/50":"bg-white/95 border-gray-200/50"),children:[(0,s.jsx)(n.E.button,{onClick:I,whileHover:{scale:1.1},whileTap:{scale:.9},className:"absolute top-3 right-3 p-2 rounded-full transition-colors ".concat(e?"text-gray-400 hover:text-white hover:bg-gray-700":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"),children:(0,s.jsx)(u.Z,{className:"w-4 h-4"})}),(0,s.jsxs)("div",{className:"flex items-start mb-4 pr-8",children:[(0,s.jsxs)(n.E.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring"},className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center mr-4 shadow-lg",children:[(0,s.jsx)("img",{src:"/icon-192x192.png",alt:"Ri-Puzzle",className:"w-8 h-8 object-contain",onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="block"}}),(0,s.jsx)("span",{className:"text-2xl hidden",children:"\uD83E\uDDE9"})]}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h4",{className:"font-bold text-lg ".concat(e?"text-white":"text-gray-900"),children:"Install Ri-Puzzle"}),(0,s.jsx)("p",{className:"text-sm ".concat(e?"text-gray-300":"text-gray-600"),children:"Get faster access and offline play"})]})]}),(0,s.jsx)("div",{className:"mb-4 text-sm ".concat(e?"text-gray-300":"text-gray-700"),children:(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),(0,s.jsx)("span",{children:"Offline play"})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),(0,s.jsx)("span",{children:"Faster loading"})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-purple-500 rounded-full mr-2"}),(0,s.jsx)("span",{children:"Native experience"})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-orange-500 rounded-full mr-2"}),(0,s.jsx)("span",{children:"No browser tabs"})]})]})}),(0,s.jsxs)("div",{className:"mb-4 p-3 rounded-lg ".concat(e?"bg-gray-800/50 border border-gray-700/30":"bg-gray-50 border border-gray-200/50"),children:[(0,s.jsxs)("h5",{className:"text-sm font-semibold mb-2 ".concat(e?"text-gray-200":"text-gray-800"),children:[_.title,":"]}),(0,s.jsx)("div",{className:"space-y-2",children:_.steps.map((t,a)=>(0,s.jsxs)("div",{className:"flex items-center text-xs",children:[(0,s.jsx)(t.icon,{className:"w-3 h-3 mr-2 text-blue-500"}),(0,s.jsx)("span",{className:e?"text-gray-300":"text-gray-600",children:t.text})]},a))})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[!x&&t&&(0,s.jsxs)(n.E.button,{onClick:k,whileHover:{scale:1.02},whileTap:{scale:.98},className:"flex-1 flex items-center justify-center px-4 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white text-sm font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all duration-200",children:[(0,s.jsx)(d,{className:"w-4 h-4 mr-2"}),"Install Now"]}),(0,s.jsx)(n.E.button,{onClick:I,whileHover:{scale:1.02},whileTap:{scale:.98},className:"".concat(x||!t?"flex-1":"px-4"," py-3 text-sm font-medium rounded-xl transition-colors ").concat(e?"text-gray-300 hover:bg-gray-700 border border-gray-600":"text-gray-700 hover:bg-gray-100 border border-gray-300"),children:x?"Got it":"Later"})]})]})})})}},8161:function(e,t,a){"use strict";a.r(t),a.d(t,{ThemeProvider:function(){return n},useTheme:function(){return o}});var s=a(7437),l=a(2265);let r=(0,l.createContext)();function n(e){let{children:t}=e,[a,n]=(0,l.useState)("dark"),[o,i]=(0,l.useState)(!1);(0,l.useEffect)(()=>{i(!0);let e=localStorage.getItem("word-puzzle-theme")||"dark";n(e),c(e)},[]);let c=e=>{let t=document.documentElement;"dark"===e?(t.classList.add("dark"),t.style.colorScheme="dark"):(t.classList.remove("dark"),t.style.colorScheme="light")};return o?(0,s.jsx)(r.Provider,{value:{theme:a,toggleTheme:()=>{let e="dark"===a?"light":"dark";n(e),localStorage.setItem("word-puzzle-theme",e),c(e)},isDark:"dark"===a},children:t}):null}function o(){let e=(0,l.useContext)(r);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}},2489:function(){},3667:function(e){e.exports={style:{fontFamily:"'__Inter_e8ce0c', '__Inter_Fallback_e8ce0c'",fontStyle:"normal"},className:"__className_e8ce0c",variable:"__variable_e8ce0c"}}},function(e){e.O(0,[529,971,472,744],function(){return e(e.s=4848)}),_N_E=e.O()}]);